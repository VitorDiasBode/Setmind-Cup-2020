[gd_scene load_steps=20 format=2]

[ext_resource path="res://Levels/Fallshade/background_glacial_mountains_lightened.png" type="Texture" id=1]
[ext_resource path="res://Scenery/Wall/Wall.tscn" type="PackedScene" id=2]
[ext_resource path="res://Levels/Fallshade/Bricks.png" type="Texture" id=3]
[ext_resource path="res://Player/Player.tscn" type="PackedScene" id=4]
[ext_resource path="res://Levels/Fallshade/WallsStone.png" type="Texture" id=5]
[ext_resource path="res://Levels/Fallshade/Gates/Gate.tscn" type="PackedScene" id=6]
[ext_resource path="res://NPC/Master/Master.tscn" type="PackedScene" id=7]
[ext_resource path="res://Player/UI.tscn" type="PackedScene" id=8]
[ext_resource path="res://NPC/FallshadeSubject/Subject.png" type="Texture" id=9]
[ext_resource path="res://NPC/GenericNPC/GenericNPC.tscn" type="PackedScene" id=10]
[ext_resource path="res://NPC/SunGuardian/SunGuardian.png" type="Texture" id=11]
[ext_resource path="res://Levels/Fallshade/Trees.png" type="Texture" id=12]
[ext_resource path="res://Levels/Fallshade/Houses/PoorHouse3.png" type="Texture" id=13]
[ext_resource path="res://Levels/Fallshade/Houses/Doors.png" type="Texture" id=14]
[ext_resource path="res://Levels/Fallshade/Houses/PoorHouse1.png" type="Texture" id=15]

[sub_resource type="GDScript" id=4]
script/source = "extends Position2D


onready var player = get_tree().get_nodes_in_group(\"Player\")[0]

func _process(delta):
	if player.global_position.x < global_position.x:
		$GenericNPC/Sprite.flip_h = false
	else:
		$GenericNPC/Sprite.flip_h = true
"

[sub_resource type="GDScript" id=3]
script/source = "extends Node2D


func _on_GenericNPC_body_exited(body):
	if body.is_in_group(\"Player\"):
		$GateSun/AnimationPlayer.play(\"Open\")
"

[sub_resource type="RectangleShape2D" id=1]
extents = Vector2( 144, 272 )

[sub_resource type="RectangleShape2D" id=2]
extents = Vector2( 288, 32 )

[node name="Fallshade" type="Node2D"]

[node name="ParallaxBackground" type="ParallaxBackground" parent="."]

[node name="ParallaxLayer" type="ParallaxLayer" parent="ParallaxBackground"]
motion_scale = Vector2( 0.2, 0 )
motion_offset = Vector2( 0, -300 )
__meta__ = {
"_edit_group_": true
}

[node name="TextureRect" type="TextureRect" parent="ParallaxBackground/ParallaxLayer"]
margin_left = -1280.0
margin_right = 502.0
margin_bottom = 216.0
rect_scale = Vector2( 3, 3 )
texture = ExtResource( 1 )
stretch_mode = 2
__meta__ = {
"_edit_use_anchors_": false
}

[node name="Trees" type="Node2D" parent="."]

[node name="Sprite" type="Sprite" parent="Trees"]
position = Vector2( -1200, 384 )
scale = Vector2( 2.03425, 2.03425 )
texture = ExtResource( 12 )

[node name="Sprite2" type="Sprite" parent="Trees"]
position = Vector2( -1200, 384 )
scale = Vector2( 2.03425, 2.03425 )
texture = ExtResource( 12 )

[node name="Sprite5" type="Sprite" parent="Trees"]
position = Vector2( -1024, 384 )
scale = Vector2( 2.03425, 2.03425 )
texture = ExtResource( 12 )

[node name="Sprite6" type="Sprite" parent="Trees"]
position = Vector2( -928, 384 )
scale = Vector2( 2.32159, 2.05608 )
texture = ExtResource( 12 )

[node name="Sprite18" type="Sprite" parent="Trees"]
position = Vector2( -1312, 400 )
scale = Vector2( 2.32159, 2.05608 )
texture = ExtResource( 12 )

[node name="Sprite7" type="Sprite" parent="Trees"]
position = Vector2( 272, 346 )
scale = Vector2( 2.32159, 2.05608 )
texture = ExtResource( 12 )

[node name="Sprite8" type="Sprite" parent="Trees"]
position = Vector2( 576, 346 )
scale = Vector2( 2.32159, 2.05608 )
texture = ExtResource( 12 )

[node name="Sprite9" type="Sprite" parent="Trees"]
position = Vector2( 848, 384 )
scale = Vector2( 2.32159, 2.05608 )
texture = ExtResource( 12 )

[node name="Sprite10" type="Sprite" parent="Trees"]
position = Vector2( 1136, 256 )
scale = Vector2( 2.32159, 2.05608 )
texture = ExtResource( 12 )

[node name="Sprite11" type="Sprite" parent="Trees"]
position = Vector2( 1220.74, 336 )
scale = Vector2( 2.32159, 2.05608 )
texture = ExtResource( 12 )

[node name="Sprite12" type="Sprite" parent="Trees"]
position = Vector2( 1597.63, 327.159 )
scale = Vector2( 2.69504, 2.1709 )
texture = ExtResource( 12 )

[node name="Sprite13" type="Sprite" parent="Trees"]
position = Vector2( 1872, 384 )
scale = Vector2( 2.69504, 2.1709 )
texture = ExtResource( 12 )

[node name="Sprite14" type="Sprite" parent="Trees"]
position = Vector2( 1936, 408 )
scale = Vector2( 2.69504, 2.1709 )
texture = ExtResource( 12 )

[node name="Sprite15" type="Sprite" parent="Trees"]
position = Vector2( 2006.82, 336 )
scale = Vector2( 2.44341, 2.1709 )
texture = ExtResource( 12 )

[node name="Sprite16" type="Sprite" parent="Trees"]
position = Vector2( 2256, 352 )
scale = Vector2( 2.44341, 2.1709 )
texture = ExtResource( 12 )

[node name="Sprite17" type="Sprite" parent="Trees"]
position = Vector2( 2416, 346 )
scale = Vector2( 2.44341, 2.1709 )
texture = ExtResource( 12 )

[node name="Sprite3" type="Sprite" parent="Trees"]
position = Vector2( -1104, 384 )
scale = Vector2( 2.03425, 2.03425 )
texture = ExtResource( 12 )

[node name="Sprite4" type="Sprite" parent="Trees"]
position = Vector2( -1104, 384 )
scale = Vector2( 2.03425, 2.03425 )
texture = ExtResource( 12 )

[node name="TextureRect" type="TextureRect" parent="."]
modulate = Color( 0.992157, 0.980392, 0.980392, 1 )
margin_top = 304.0
margin_right = 640.0
margin_bottom = 364.0
rect_scale = Vector2( 4, 4 )
texture = ExtResource( 5 )
expand = true
stretch_mode = 2
__meta__ = {
"_edit_use_anchors_": false
}

[node name="A1" type="Position2D" parent="."]
position = Vector2( 192.145, 288.218 )

[node name="A2" type="Position2D" parent="."]
position = Vector2( 12112, -22.5768 )

[node name="A3" type="Position2D" parent="."]
position = Vector2( 6759.65, -6253.31 )

[node name="A4" type="Position2D" parent="."]
position = Vector2( 6614.07, 6638.12 )

[node name="Houses" type="Node2D" parent="."]

[node name="PoorHouse1" type="Sprite" parent="Houses"]
position = Vector2( 932.738, 500.576 )
scale = Vector2( 1, 1 )
texture = ExtResource( 15 )

[node name="PoorHouse2" type="Sprite" parent="Houses"]
position = Vector2( 932.738, 500.576 )
scale = Vector2( 1, 1 )
texture = ExtResource( 15 )

[node name="PoorHouse3" type="Sprite" parent="Houses"]
position = Vector2( 1517.63, 486.288 )
scale = Vector2( 1.57403, 1.3572 )
texture = ExtResource( 15 )

[node name="Sprite" type="Sprite" parent="Houses"]
modulate = Color( 0.639216, 0.956863, 0.415686, 1 )
position = Vector2( 1104, 480 )
scale = Vector2( 2.00946, 2.00946 )
texture = ExtResource( 13 )

[node name="Doors" type="Sprite" parent="Houses"]
position = Vector2( 1120, 504.319 )
scale = Vector2( 2, 2 )
texture = ExtResource( 14 )

[node name="PoorHouse4" type="Sprite" parent="Houses"]
position = Vector2( 736, 497.912 )
scale = Vector2( 2, 2 )
texture = ExtResource( 13 )

[node name="Doors2" type="Sprite" parent="Houses"]
position = Vector2( 1520, 504.319 )
scale = Vector2( 2, 2 )
texture = ExtResource( 14 )

[node name="PoorHouse5" type="Sprite" parent="Houses"]
position = Vector2( 1408, 480 )
scale = Vector2( 1.75, 1.75 )
texture = ExtResource( 15 )

[node name="Doors4" type="Sprite" parent="Houses"]
position = Vector2( 1392, 504.319 )
scale = Vector2( 2, 2 )
texture = ExtResource( 14 )

[node name="Doors3" type="Sprite" parent="Houses"]
position = Vector2( 720, 503.159 )
scale = Vector2( 2, 2 )
texture = ExtResource( 14 )

[node name="Ground" parent="." instance=ExtResource( 2 )]
position = Vector2( -1344, 541 )
texture = ExtResource( 3 )
size = Vector2( 3904, 256 )

[node name="NPCs" type="Node2D" parent="."]

[node name="GenericNPC" parent="NPCs" instance=ExtResource( 10 )]
position = Vector2( -144, 503.912 )
sprite = ExtResource( 9 )
speech = "Homen: Saudações nobre Arcano. Meu grande Lorde Goven me enviou para recebê-lo. Com sua grande sabedoria eterna, ele sabia da sua vinda. Por favor, entre na cidade e suba a Grande Torre Branca. O excelentíssimo Lorde Goven estará te esperando no alto da torre.Os Guardiões têm ordens para permitir sua passagem."

[node name="Guardian" type="Position2D" parent="NPCs"]
position = Vector2( 352, 551.912 )
script = SubResource( 4 )
__meta__ = {
"_edit_group_": true
}

[node name="GenericNPC" parent="NPCs/Guardian" instance=ExtResource( 10 )]
position = Vector2( 0, -48 )
sprite = ExtResource( 11 )
speech = "Guardião do Sol: ......"

[node name="Guardian2" type="Position2D" parent="NPCs"]
position = Vector2( 208, 550 )
script = SubResource( 4 )
__meta__ = {
"_edit_group_": true
}

[node name="GenericNPC" parent="NPCs/Guardian2" instance=ExtResource( 10 )]
position = Vector2( 0, -48 )
sprite = ExtResource( 11 )
speech = "Guardião do Sol: ......"

[node name="Player" parent="." instance=ExtResource( 4 )]
position = Vector2( -736, 480 )

[node name="Gates" type="Node2D" parent="."]
position = Vector2( 0, -3 )
script = SubResource( 3 )

[node name="GateSun" parent="Gates" instance=ExtResource( 6 )]
modulate = Color( 0.956863, 0.984314, 0.509804, 1 )
position = Vector2( 40, 544 )
scale = Vector2( 3, 3 )

[node name="InvisibleWall" type="StaticBody2D" parent="."]
position = Vector2( -1120, 368 )

[node name="CollisionShape2D" type="CollisionShape2D" parent="InvisibleWall"]
position = Vector2( 112, -96 )
shape = SubResource( 1 )

[node name="CollisionShape2D2" type="CollisionShape2D" parent="InvisibleWall"]
position = Vector2( 256, -390.577 )
shape = SubResource( 2 )

[node name="Master" parent="." instance=ExtResource( 7 )]
position = Vector2( -816, 528 )
speech = "Joven aprendiz, você chegou na cidadela de Fallshade. O Lorde desse feudo é conhecido por ser tirânico e opressor. Ele é um mago muito astuto e vai querer te manipular para seus próprios ganhos. O povo pobre desde feudo vive em miséria e fome e não por muito tempo vão aceitar essa situação. Siga seus instintos e tome a decisão certa. "

[node name="UI" parent="." instance=ExtResource( 8 )]
[connection signal="body_exited" from="NPCs/GenericNPC" to="Gates" method="_on_GenericNPC_body_exited"]
